version: "3"

services: 
    gitlab:
        image: 'gitlab/gitlab-ee:latest'
        restart: always
        hostname: 'gitlab'
        container_name: gitlab
        environment:
          GITLAB_OMNIBUS_CONFIG: |
            external_url 'https://gitlab.final.com'
            # Add any other gitlab.rb configuration here, each on its own line
        ports:
          - '8880:80'
          - '8443:443'
          - '44:22'
        volumes:
          - 'gitlab_config:/etc/gitlab'
          - 'gitlab_logs:/var/log/gitlab'
          - 'gitlab_data:/var/opt/gitlab'

    jenkins:
        image: jenkins/jenkins:lts
        privileged: true
        user: root
        ports:
          - '8081:8080'
          - '50000:50000'
        container_name: jenkins
        volumes:
          - jenkins_data:/var/jenkins_home
          - /var/run/docker.sock:/var/run/docker.sock
          - /usr/local/bin/docker:/usr/local/bin/docker

    zabbix:
      image: zabbix/zabbix-appliance:latest
      container_name: zabbix
      ports: 
        - 8082:80
        - 10051:10051





volumes: 
    gitlab_config:
    gitlab_logs:
    gitlab_data:
    jenkins_data:

